{
  DBRProgressMonitor monitor=context.getProgressMonitor();
  JDBCResultSet dbResult=context.getMetaData().getTables(catalog == null ? null : catalog.getName(),schema == null ? null : schema.getName(),tableNameMask,null);
  try {
    while (dbResult.next()) {
      if (monitor.isCanceled()) {
        break;
      }
      String catalogName=JDBCUtils.safeGetStringTrimmed(dbResult,JDBCConstants.TABLE_CAT);
      String schemaName=JDBCUtils.safeGetStringTrimmed(dbResult,JDBCConstants.TABLE_SCHEM);
      String tableName=JDBCUtils.safeGetStringTrimmed(dbResult,JDBCConstants.TABLE_NAME);
      if (CommonUtils.isEmpty(tableName)) {
        continue;
      }
      objects.add(new TableReference(findContainer(context.getProgressMonitor(),catalog,schema,catalogName,schemaName),tableName,JDBCUtils.safeGetString(dbResult,JDBCConstants.REMARKS)));
      if (objects.size() >= maxResults) {
        break;
      }
    }
  }
  finally {
    dbResult.close();
  }
}
