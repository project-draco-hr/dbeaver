{
  inlineControl.addFocusListener(new FocusListener(){
    @Override public void focusGained(    FocusEvent e){
    }
    @Override public void focusLost(    FocusEvent e){
      DBeaverUI.asyncExec(new Runnable(){
        @Override public void run(){
          if (inlineControl.isDisposed()) {
            return;
          }
          Control newFocus=inlineControl.getDisplay().getFocusControl();
          if (newFocus != null) {
            for (Control fc=newFocus.getParent(); fc != null; fc=fc.getParent()) {
              if (fc == valueController.getEditPlaceholder()) {
                return;
              }
            }
          }
          if (!valueController.isReadOnly()) {
            saveValue();
          }
 else {
            ((IMultiController)valueController).closeInlineEditor();
          }
        }
      }
);
    }
  }
);
}
