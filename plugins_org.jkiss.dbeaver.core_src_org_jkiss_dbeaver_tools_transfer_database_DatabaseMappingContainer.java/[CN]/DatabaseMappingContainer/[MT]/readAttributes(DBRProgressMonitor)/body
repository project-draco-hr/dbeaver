{
  if (source instanceof DBSEntity) {
    for (    DBSEntityAttribute attr : ((DBSEntity)source).getAttributes(monitor)) {
      addAttributeMapping(monitor,attr);
    }
  }
 else {
    DBCSession session=source.getDataSource().openSession(monitor,DBCExecutionPurpose.UTIL,"Read query meta data");
    try {
      MetadataReceiver receiver=new MetadataReceiver();
      source.readData(session,receiver,null,0,1);
      for (      DBCAttributeMetaData attr : receiver.attributes) {
        addAttributeMapping(monitor,attr);
      }
    }
  finally {
      session.close();
    }
  }
}
