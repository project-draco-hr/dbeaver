{
switch (controller.getEditType()) {
case INLINE:
{
      if (controller.getValue() instanceof DBDContentCached) {
        final boolean isText=ContentUtils.isTextContent(((DBDContent)controller.getValue()));
        return new ContentInlineEditor(controller,isText);
      }
 else {
        return null;
      }
    }
case EDITOR:
{
    Object value=controller.getValue();
    DBDValueController.EditType binaryEditType=DBDValueController.EditType.valueOf(controller.getDataSource().getContainer().getPreferenceStore().getString(DBeaverPreferences.RESULT_SET_BINARY_EDITOR_TYPE));
    if (binaryEditType != DBDValueController.EditType.EDITOR && value instanceof DBDContentCached) {
      return new TextViewDialog(controller);
    }
 else     if (value instanceof DBDContent) {
      DBDContent content=(DBDContent)value;
      boolean isText=ContentUtils.isTextContent(content);
      List<ContentEditorPart> parts=new ArrayList<ContentEditorPart>();
      if (isText) {
        parts.add(new ContentTextEditorPart());
        if (isXML(content)) {
          parts.add(new ContentXMLEditorPart());
        }
      }
 else {
        parts.add(new ContentBinaryEditorPart());
        parts.add(new ContentTextEditorPart());
        parts.add(new ContentImageEditorPart());
      }
      return ContentEditor.openEditor(controller,parts.toArray(new ContentEditorPart[parts.size()]));
    }
 else {
      controller.showMessage(CoreMessages.model_jdbc_unsupported_content_value_type_,true);
      return null;
    }
  }
case PANEL:
{
  return new ContentPanelEditor(controller);
}
default :
return null;
}
}
