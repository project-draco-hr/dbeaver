{
  OBJECT_TYPE foreignKey=command.getObject();
  String constraintName=DBUtils.getQuotedIdentifier(foreignKey.getDataSource(),foreignKey.getName());
  StringBuilder decl=new StringBuilder(40);
  decl.append("CONSTRAINT ").append(constraintName).append(" ").append(foreignKey.getConstraintType().getName().toUpperCase()).append(" (");
  boolean firstColumn=false;
  try {
    final Collection<? extends DBSEntityAttributeRef> columns=command.getObject().getAttributeReferences(VoidProgressMonitor.INSTANCE);
    firstColumn=true;
    for (    DBSEntityAttributeRef constraintColumn : columns) {
      if (!firstColumn)       decl.append(",");
      firstColumn=false;
      decl.append(constraintColumn.getAttribute().getName());
    }
  }
 catch (  DBException e) {
    log.error("Can't obtain reference attributes",e);
  }
  decl.append(") REFERENCES ").append(foreignKey.getReferencedConstraint().getParentObject().getFullQualifiedName()).append("(");
  firstColumn=true;
  try {
    for (    DBSEntityAttributeRef constraintColumn : foreignKey.getReferencedConstraint().getAttributeReferences(VoidProgressMonitor.INSTANCE)) {
      if (!firstColumn)       decl.append(",");
      firstColumn=false;
      decl.append(constraintColumn.getAttribute().getName());
    }
  }
 catch (  DBException e) {
    log.error("Can't obtain ref constraint reference attributes",e);
  }
  decl.append(")");
  if (foreignKey.getDeleteRule() != null && !CommonUtils.isEmpty(foreignKey.getDeleteRule().getClause())) {
    decl.append(" ON DELETE ").append(foreignKey.getDeleteRule().getClause());
  }
  if (foreignKey.getUpdateRule() != null && !CommonUtils.isEmpty(foreignKey.getUpdateRule().getClause())) {
    decl.append(" ON UPDATE ").append(foreignKey.getUpdateRule().getClause());
  }
  return decl;
}
