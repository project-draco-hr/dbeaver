{
  formatterCfg=configuration;
  statementDelimiters.add(SQLConstants.DEFAULT_STATEMENT_DELIMITER);
  statementDelimiters.add(formatterCfg.getSyntaxManager().getStatementDelimiter().toUpperCase());
  SQLTokensParser fParser=new SQLTokensParser(formatterCfg);
  functionBracket.clear();
  boolean isSqlEndsWithNewLine=false;
  if (argSql.endsWith("\n")) {
    isSqlEndsWithNewLine=true;
  }
  List<FormatterToken> list=fParser.parse(argSql);
  list=format(list);
  StringBuilder after=new StringBuilder(argSql.length() + 20);
  for (  FormatterToken token : list) {
    after.append(token.getString());
  }
  if (isSqlEndsWithNewLine) {
    after.append(ContentUtils.getDefaultLineSeparator());
  }
  return after.toString();
}
