{
  List<Object> rowsExpanded=null;
  for (int i=0; i < rows.length; i++) {
    Object row=rows[i];
    result.add(row);
    parents.add(parent);
    Object[] children=getContentProvider().getChildren(row);
    if (children != null) {
      IGridContentProvider.ElementState state=getContentProvider().getDefaultState(row);
      GridNode node=new GridNode(children,state,level + 1);
      rowNodes.put(row,node);
      if (state == IGridContentProvider.ElementState.EXPANDED) {
        collectRows(result,parents,node,children,level + 1);
      }
    }
  }
}
