{
  try {
    DBeaverUI.runInProgressService(new DBRRunnableWithProgress(){
      @Override public void run(      DBRProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
        DBCExecutionContext context=dataSource.openContext(monitor,DBCExecutionPurpose.META,"Check connection's auto-commit state");
        final DBCTransactionManager txnManager=context.getTransactionManager();
        try {
          if (!txnManager.getTransactionIsolation().equals(level)) {
            txnManager.setTransactionIsolation(level);
          }
        }
 catch (        DBCException ex) {
          log.warn("Can't change current transaction isolation level",ex);
        }
 finally {
          context.close();
        }
      }
    }
);
  }
 catch (  InvocationTargetException e) {
    UIUtils.showErrorDialog(null,"Transaction mode change","Can't set transaction isolation",e.getTargetException());
  }
catch (  InterruptedException e) {
  }
}
