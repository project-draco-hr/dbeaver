{
  log.debug("Shutdown initiated");
  long startTime=System.currentTimeMillis();
  DBeaverCore.setClosing(true);
  if (this.navigatorModel != null) {
    this.navigatorModel.dispose();
  }
  if (this.projectRegistry != null) {
    this.projectRegistry.dispose();
    this.projectRegistry=null;
  }
  IProgressMonitor monitor=new NullProgressMonitor();
  if (workspace != null) {
    if (tempProject != null && tempProject.exists()) {
      try {
        tempProject.delete(true,true,monitor);
      }
 catch (      CoreException e) {
        log.warn("Can't cleanup temp project",e);
      }
    }
  }
  if (this.qmLogWriter != null) {
    this.queryManager.unregisterMetaListener(qmLogWriter);
    this.qmLogWriter.dispose();
    this.qmLogWriter=null;
  }
  if (this.queryManager != null) {
    this.queryManager.dispose();
  }
  if (this.networkHandlerRegistry != null) {
    this.networkHandlerRegistry.dispose();
    this.networkHandlerRegistry=null;
  }
  if (this.dataTransferRegistry != null) {
    this.dataTransferRegistry.dispose();
    this.dataTransferRegistry=null;
  }
  if (this.dataFormatterRegistry != null) {
    this.dataFormatterRegistry.dispose();
    this.dataFormatterRegistry=null;
  }
  if (this.editorsRegistry != null) {
    this.editorsRegistry.dispose();
    this.editorsRegistry=null;
  }
  if (this.dataSourceProviderRegistry != null) {
    this.dataSourceProviderRegistry.dispose();
    this.dataSourceProviderRegistry=null;
  }
  if (this.editorsAdapter != null) {
    Platform.getAdapterManager().unregisterAdapters(this.editorsAdapter);
    this.editorsAdapter=null;
  }
  if (isStandalone() && workspace != null) {
    try {
      workspace.save(true,monitor);
    }
 catch (    CoreException ex) {
      log.error("Can't save workspace",ex);
    }
  }
  DBeaverUI.disposeUI();
  DBeaverCore.instance=null;
  DBeaverCore.disposed=true;
  log.debug("Shutdown completed in " + (System.currentTimeMillis() - startTime) + "ms");
}
