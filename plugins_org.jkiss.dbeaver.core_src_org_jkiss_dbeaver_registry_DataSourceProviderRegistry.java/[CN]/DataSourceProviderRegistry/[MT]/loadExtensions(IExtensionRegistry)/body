{
{
    IConfigurationElement[] extElements=registry.getConfigurationElementsFor(DataSourceProviderDescriptor.EXTENSION_ID);
    for (    IConfigurationElement ext : extElements) {
      DataSourceProviderDescriptor provider=new DataSourceProviderDescriptor(this,ext);
      dataSourceProviders.add(provider);
    }
    Collections.sort(dataSourceProviders,new Comparator<DataSourceProviderDescriptor>(){
      @Override public int compare(      DataSourceProviderDescriptor o1,      DataSourceProviderDescriptor o2){
        if (o1.isDriversManagable() && !o2.isDriversManagable()) {
          return 1;
        }
        if (o2.isDriversManagable() && !o1.isDriversManagable()) {
          return -1;
        }
        return o1.getName().compareToIgnoreCase(o2.getName());
      }
    }
);
  }
{
    IConfigurationElement[] extElements=registry.getConfigurationElementsFor(DataTypeProviderDescriptor.EXTENSION_ID);
    for (    IConfigurationElement ext : extElements) {
      DataTypeProviderDescriptor provider=new DataTypeProviderDescriptor(this,ext);
      dataTypeProviders.add(provider);
    }
  }
  File driversConfig=DBeaverCore.getInstance().getConfigurationFile(RegistryConstants.DRIVERS_FILE_NAME,true);
  if (driversConfig.exists()) {
    loadDrivers(driversConfig);
  }
{
    List<DriverDescriptor> allDrivers=new ArrayList<DriverDescriptor>();
    for (    DataSourceProviderDescriptor provider : dataSourceProviders) {
      allDrivers.addAll(provider.getDrivers());
    }
    for (    DriverDescriptor driver1 : allDrivers) {
      for (      DriverDescriptor driver2 : allDrivers) {
        if (driver1 != driver2 && driver1.replaces(driver2)) {
          driver2.setReplacedBy(driver1);
        }
      }
    }
  }
}
