{
  if (!model.isSingleSource()) {
    UIUtils.showErrorDialog(getControl().getShell(),"Apply changes error","Can't save data for result set from multiple sources");
    return false;
  }
  try {
    boolean needPK=false;
    for (    ResultSetRow row : model.getAllRows()) {
      if (row.getState() == ResultSetRow.STATE_REMOVED || (row.getState() == ResultSetRow.STATE_NORMAL && row.isChanged())) {
        needPK=true;
        break;
      }
    }
    if (needPK) {
      if (!checkEntityIdentifier()) {
        return false;
      }
    }
    return new ResultSetPersister(this).applyChanges(monitor,listener);
  }
 catch (  DBException e) {
    UIUtils.showErrorDialog(getControl().getShell(),"Apply changes error","Error saving changes in database",e);
    return false;
  }
}
