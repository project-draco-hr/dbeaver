{
  boolean enableFilters=false;
  DBPDataSource dataSource=getDataSource();
  if (dataSource != null) {
    StringBuilder where=new StringBuilder();
    SQLUtils.appendConditionString(model.getDataFilter(),dataSource,null,where,true);
    String whereCondition=where.toString().trim();
    filtersText.setText(whereCondition);
    if (!whereCondition.isEmpty()) {
      addFiltersHistory(whereCondition);
    }
    if (resultSetProvider.isReadyToRun() && !model.isUpdateInProgress() && (!CommonUtils.isEmpty(whereCondition) || (getModel().getVisibleColumnCount() > 0 && supportsDataFilter()))) {
      enableFilters=true;
    }
  }
  enableFilters(enableFilters);
}
