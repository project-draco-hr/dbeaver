{
  DBSEntity entity=model.getSingleSource();
  if (entity == null) {
    UIUtils.showErrorDialog(viewerPanel.getShell(),"Unrecognized entity","Can't detect source entity");
    return false;
  }
  final DBDRowIdentifier identifier=getVirtualEntityIdentifier();
  if (identifier != null) {
    if (CommonUtils.isEmpty(identifier.getAttributes())) {
      RunnableWithResult<Boolean> confirmer=new RunnableWithResult<Boolean>(){
        @Override public void run(){
          result=ValidateUniqueKeyUsageDialog.validateUniqueKey(ResultSetViewer.this);
        }
      }
;
      UIUtils.runInUI(getControl().getShell(),confirmer);
      return confirmer.getResult();
    }
  }
{
    DBDRowIdentifier rowIdentifier=model.getVisibleAttribute(0).getRowIdentifier();
    if (rowIdentifier == null) {
      UIUtils.showErrorDialog(viewerPanel.getShell(),"No entity identifier","Entity " + entity.getName() + " has no identifier");
      return false;
    }
 else     if (CommonUtils.isEmpty(rowIdentifier.getAttributes())) {
      UIUtils.showErrorDialog(viewerPanel.getShell(),"No entity identifier","Entity " + entity.getName() + " has empty identifier");
      return false;
    }
  }
  return true;
}
