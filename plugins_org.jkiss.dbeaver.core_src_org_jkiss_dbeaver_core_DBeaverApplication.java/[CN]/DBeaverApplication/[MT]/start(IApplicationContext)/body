{
  Display display=PlatformUI.createDisplay();
  Location instanceLoc=Platform.getInstanceLocation();
  String defaultHomePath=getDefaultWorkspaceLocation().getAbsolutePath();
  try {
    URL defaultHomeURL=new URL("file",null,defaultHomePath);
    instanceLoc.set(defaultHomeURL,true);
  }
 catch (  Throwable e) {
    System.err.println("Can't switch workspace to '" + defaultHomePath + "' - "+ e.getMessage());
  }
  System.out.println("Install path: '" + Platform.getInstallLocation().getURL() + "'");
  System.out.println("Workspace path: '" + instanceLoc.getURL() + "'");
  try {
    int returnCode=PlatformUI.createAndRunWorkbench(display,new ApplicationWorkbenchAdvisor());
    if (returnCode == PlatformUI.RETURN_RESTART) {
      return IApplication.EXIT_RESTART;
    }
    return IApplication.EXIT_OK;
  }
  finally {
    display.dispose();
  }
}
