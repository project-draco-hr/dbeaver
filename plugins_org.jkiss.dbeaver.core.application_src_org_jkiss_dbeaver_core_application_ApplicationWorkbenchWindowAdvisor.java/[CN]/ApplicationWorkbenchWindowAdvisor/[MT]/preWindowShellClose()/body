{
  IWorkbenchWindow window=getWindowConfigurer().getWindow();
  try {
    if (!ConfirmationDialog.confirmAction(window.getShell(),DBeaverPreferences.CONFIRM_EXIT)) {
      return false;
    }
    IWorkbenchPage workbenchPage=window.getActivePage();
    IEditorReference[] editors=workbenchPage.getEditorReferences();
    for (    IEditorReference editor : editors) {
      IEditorPart editorPart=editor.getEditor(false);
      if (editorPart != null && editorPart.getEditorInput() instanceof ContentEditorInput) {
        workbenchPage.closeEditor(editorPart,false);
      }
    }
  }
 catch (  Throwable e) {
    e.printStackTrace();
  }
  ProjectRegistry projectRegistry=DBeaverCore.getInstance().getProjectRegistry();
  if (projectRegistry != null) {
    projectRegistry.removeProjectListener(this);
  }
  return super.preWindowShellClose();
}
