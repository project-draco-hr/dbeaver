{
  this.folders=folders;
  List<List<FolderInfo>> groups=new ArrayList<List<FolderInfo>>();
  List<FolderInfo> curGroup=null;
  for (  FolderInfo folder : folders) {
    if (folder.isEmbeddable()) {
      groups.add(curGroup=new ArrayList<FolderInfo>());
      curGroup.add(folder);
      curGroup=null;
    }
 else {
      if (curGroup == null) {
        groups.add(curGroup=new ArrayList<FolderInfo>());
      }
      curGroup.add(folder);
    }
  }
  for (  List<FolderInfo> group : groups) {
    FolderPane folderPane=new FolderPane(compositePane);
    folderPane.setFolders(group.toArray(new FolderInfo[group.size()]));
    folderPanes.add(folderPane);
  }
  int maxWidth=0;
  for (  FolderPane folderPane : folderPanes) {
    int width=folderPane.folderList.computeSize(-1,-1,false).x;
    if (width > maxWidth) {
      maxWidth=width;
    }
  }
  for (  FolderPane folderPane : folderPanes) {
    ((GridData)folderPane.folderList.getLayoutData()).widthHint=maxWidth;
  }
  compositePane.layout();
}
