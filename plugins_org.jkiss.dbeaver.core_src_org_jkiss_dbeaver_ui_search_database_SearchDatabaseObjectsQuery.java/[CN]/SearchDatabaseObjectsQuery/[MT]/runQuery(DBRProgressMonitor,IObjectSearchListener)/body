{
  try {
    List<DBSObjectType> objectTypes=params.getObjectTypes();
    String objectNameMask=params.getObjectNameMask();
    if (params.getMatchType() == SearchDatabaseConstants.MATCH_INDEX_STARTS_WITH) {
      if (!objectNameMask.endsWith("%")) {
        objectNameMask=objectNameMask + "%";
      }
    }
 else     if (params.getMatchType() == SearchDatabaseConstants.MATCH_INDEX_CONTAINS) {
      if (!objectNameMask.startsWith("%")) {
        objectNameMask="%" + objectNameMask;
      }
      if (!objectNameMask.endsWith("%")) {
        objectNameMask=objectNameMask + "%";
      }
    }
    DBNModel navigatorModel=DBeaverCore.getInstance().getNavigatorModel();
    Collection<DBSObjectReference> objects=structureAssistant.findObjectsByMask(monitor,params.getParentObject(),objectTypes.toArray(new DBSObjectType[objectTypes.size()]),objectNameMask,params.isCaseSensitive(),params.getMaxResults());
    for (    DBSObjectReference reference : objects) {
      try {
        DBSObject object=reference.resolveObject(monitor);
        if (object != null) {
          DBNNode node=navigatorModel.getNodeByObject(monitor,object,true);
          if (node != null) {
            listener.objectsFound(Collections.singleton(node));
          }
        }
      }
 catch (      DBException e) {
        log.error(e);
      }
    }
  }
 catch (  Throwable ex) {
    if (ex instanceof InvocationTargetException) {
      throw (InvocationTargetException)ex;
    }
 else {
      throw new InvocationTargetException(ex);
    }
  }
}
