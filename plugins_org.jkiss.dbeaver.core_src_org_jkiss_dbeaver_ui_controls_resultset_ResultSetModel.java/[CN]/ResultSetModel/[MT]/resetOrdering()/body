{
  final boolean hasOrdering=dataFilter.hasOrdering();
  final List<DBDAttributeConstraint> orderConstraints=dataFilter.getOrderConstraints();
  Collections.sort(curRows,new Comparator<RowData>(){
    @Override public int compare(    RowData row1,    RowData row2){
      if (!hasOrdering) {
        return row1.rowNumber - row2.rowNumber;
      }
      int result=0;
      for (      DBDAttributeConstraint co : orderConstraints) {
        final DBDAttributeBinding binding=co.getAttribute();
        if (binding == null) {
          continue;
        }
        Object cell1=row1.values[binding.getAttributeIndex()];
        Object cell2=row2.values[binding.getAttributeIndex()];
        if (cell1 == cell2) {
          result=0;
        }
 else         if (DBUtils.isNullValue(cell1)) {
          result=1;
        }
 else         if (DBUtils.isNullValue(cell2)) {
          result=-1;
        }
 else         if (cell1 instanceof Comparable) {
          result=((Comparable)cell1).compareTo(cell2);
        }
 else {
          String str1=cell1.toString();
          String str2=cell2.toString();
          result=str1.compareTo(str2);
        }
        if (co.isOrderDescending()) {
          result=-result;
        }
        if (result != 0) {
          break;
        }
      }
      return result;
    }
  }
);
  for (int i=0; i < curRows.size(); i++) {
    curRows.get(i).visualNumber=i;
  }
}
