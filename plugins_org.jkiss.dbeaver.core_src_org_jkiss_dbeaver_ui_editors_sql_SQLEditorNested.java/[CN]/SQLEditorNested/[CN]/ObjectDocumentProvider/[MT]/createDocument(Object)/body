{
  final Document document=new Document();
  try {
    DBeaverUI.runInProgressService(new DBRRunnableWithProgress(){
      @Override public void run(      DBRProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
        try {
          String sourceText=getSourceText(monitor);
          if (sourceText != null) {
            document.set(sourceText);
          }
        }
 catch (        DBException e) {
          throw new InvocationTargetException(e);
        }
      }
    }
);
  }
 catch (  InvocationTargetException e) {
    UIUtils.showErrorDialog(getSite().getShell(),"Source text read error","Can't get SQL text",e.getTargetException());
  }
catch (  InterruptedException e) {
  }
  return document;
}
