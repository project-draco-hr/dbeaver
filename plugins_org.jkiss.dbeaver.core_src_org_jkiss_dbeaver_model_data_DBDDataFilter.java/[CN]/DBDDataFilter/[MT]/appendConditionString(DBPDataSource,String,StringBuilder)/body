{
  boolean hasWhere=false;
  for (  DBDAttributeConstraint constraint : constraints) {
    String criteria=constraint.getCriteria();
    if (CommonUtils.isEmpty(criteria)) {
      continue;
    }
    if (hasWhere)     query.append(" AND ");
    hasWhere=true;
    if (conditionTable != null) {
      query.append(conditionTable).append('.');
    }
    query.append(DBUtils.getQuotedIdentifier(dataSource,constraint.getAttribute().getName()));
    final char firstChar=criteria.trim().charAt(0);
    if (!Character.isLetter(firstChar) && firstChar != '=' && firstChar != '>' && firstChar != '<' && firstChar != '!') {
      query.append('=').append(criteria);
    }
 else {
      query.append(' ').append(criteria);
    }
  }
  if (!CommonUtils.isEmpty(where)) {
    if (hasWhere)     query.append(" AND ");
    query.append(where);
  }
}
