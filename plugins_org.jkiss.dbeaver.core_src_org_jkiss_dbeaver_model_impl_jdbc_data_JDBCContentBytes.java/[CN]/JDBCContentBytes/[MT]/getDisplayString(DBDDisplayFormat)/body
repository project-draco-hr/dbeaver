{
  if (data == null) {
    return null;
  }
  boolean showStrings=dataSource.getContainer().getPreferenceStore().getBoolean(PrefConstants.RESULT_SET_BINARY_SHOW_STRINGS);
  if (!showStrings) {
    return "binary [" + data.length + "]";
  }
  int maxLength=dataSource.getContainer().getPreferenceStore().getInt(PrefConstants.RESULT_SET_BINARY_STRING_MAX_LEN);
  int length=data.length;
  if (length > maxLength) {
    length=maxLength;
  }
  char[] chars=new char[length];
  for (int i=0; i < length; i++) {
    int b=data[i];
    if (b < 0) {
      b=-b + 127;
    }
    chars[i]=(char)b;
  }
  StringBuilder strValue=new StringBuilder(length + 10);
  strValue.append(chars);
  if (data.length > length) {
    strValue.append("...");
    strValue.append(" [").append(data.length).append("]");
  }
  return strValue.toString();
}
