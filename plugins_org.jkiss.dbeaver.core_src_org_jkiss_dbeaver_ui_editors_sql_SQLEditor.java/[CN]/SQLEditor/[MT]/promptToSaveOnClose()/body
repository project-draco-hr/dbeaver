{
  int jobsRunning=0;
  for (  DataContainer dataContainer : dataContainers) {
    jobsRunning+=dataContainer.curJobRunning.get();
  }
  if (jobsRunning > 0) {
    MessageBox messageBox=new MessageBox(getSite().getShell(),SWT.ICON_WARNING | SWT.OK);
    messageBox.setMessage(CoreMessages.editors_sql_save_on_close_message);
    messageBox.setText(CoreMessages.editors_sql_save_on_close_text);
    messageBox.open();
    return ISaveablePart2.CANCEL;
  }
  for (  DataContainer dataContainer : dataContainers) {
    if (dataContainer.viewer.isDirty()) {
      return dataContainer.viewer.promptToSaveOnClose();
    }
  }
  return ISaveablePart2.YES;
}
