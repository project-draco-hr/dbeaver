{
  DBCExecutionContext executionContext=getExecutionContext();
  if (executionContext != null) {
    DBCServerOutputReader outputReader=DBUtils.getAdapter(DBCServerOutputReader.class,executionContext.getDataSource());
    if (outputReader != null && outputReader.isServerOutputEnabled()) {
      dumpServerOutput(executionContext,outputReader);
    }
  }
  if (result.hasError()) {
    setStatus(GeneralUtils.getFirstMessage(result.getError()),true);
  }
  if (!scriptMode && dataSourceContainer.getPreferenceStore().getBoolean(SQLPreferenceConstants.RESET_CURSOR_ON_EXECUTE)) {
    getSelectionProvider().setSelection(originalSelection);
  }
  SQLQuery query=result.getStatement();
  QueryResultsContainer results=queryProcessor.getResults(query);
  if (results != null) {
    CTabItem tabItem=results.tabItem;
    if (!tabItem.isDisposed()) {
      int queryIndex=queryProcessors.indexOf(queryProcessor);
      String resultSetName=getResultsTabName(results.resultSetNumber,queryIndex,result.getResultSetName());
      tabItem.setText(resultSetName);
    }
  }
  if (result.getQueryTime() > DBeaverCore.getGlobalPreferenceStore().getLong(DBeaverPreferences.AGENT_LONG_OPERATION_TIMEOUT) * 1000) {
    DBeaverUI.notifyAgent("Query completed [" + getEditorInput().getPath().lastSegment() + "]"+ GeneralUtils.getDefaultLineSeparator()+ CommonUtils.truncateString(query == null ? "" : query.getQuery(),200),!result.hasError() ? IStatus.INFO : IStatus.ERROR);
  }
}
