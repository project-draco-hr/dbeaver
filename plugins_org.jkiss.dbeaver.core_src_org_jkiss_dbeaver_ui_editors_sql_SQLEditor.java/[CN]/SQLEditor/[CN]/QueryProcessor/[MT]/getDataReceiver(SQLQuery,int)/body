{
  if (curDataReceiver != null) {
    return curDataReceiver;
  }
  final boolean isStatsResult=(statement != null && statement.getData() == SQLQueryJob.STATS_RESULTS);
  if (resultSetNumber >= resultProviders.size() && !isDisposed()) {
    getSite().getShell().getDisplay().syncExec(new Runnable(){
      @Override public void run(){
        createResultsProvider(resultSetNumber);
      }
    }
);
  }
  if (resultSetNumber >= resultProviders.size()) {
    return null;
  }
  final QueryResultsProvider resultsProvider=resultProviders.get(resultSetNumber);
  getSite().getShell().getDisplay().syncExec(new Runnable(){
    @Override public void run(){
      if (statement != null) {
        resultsProvider.query=statement;
        resultsProvider.tabItem.setToolTipText(CommonUtils.truncateString(statement.getQuery(),1000));
        if (isStatsResult) {
          String tabName="Statistics";
          int queryIndex=queryProcessors.indexOf(QueryProcessor.this);
          if (queryIndex > 0) {
            tabName+=" - " + (queryIndex + 1);
          }
          resultsProvider.tabItem.setText(tabName);
          if (!CommonUtils.isEmpty(statement.getQuery())) {
            resultsProvider.tabItem.setToolTipText(statement.getQuery());
          }
        }
      }
    }
  }
);
  return resultsProvider.getResultSetViewer().getDataReceiver();
}
