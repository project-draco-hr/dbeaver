{
  String text=getHeaderText();
  gc.setFont(getDisplay().getSystemFont());
  Color background=getHeaderBackground();
  if (background == null) {
    background=DEFAULT_BACKGROUND;
  }
  gc.setBackground(background);
  if (isSelected()) {
    gc.setBackground(grid.getCellHeaderSelectionBackground());
  }
  gc.fillRectangle(bounds.x,bounds.y,bounds.width,bounds.height + 1);
{
    gc.setForeground(DEFAULT_FOREGROUND);
    gc.drawLine(bounds.x + bounds.width - 1,bounds.y,bounds.x + bounds.width - 1,bounds.y + bounds.height - 1);
    gc.drawLine(bounds.x,bounds.y + bounds.height - 1,bounds.x + bounds.width - 1,bounds.y + bounds.height - 1);
  }
  int x=LEFT_MARGIN;
  if (level > 0) {
    x+=level * LEVEL_SPACING;
  }
  Image image=getHeaderImage();
  if (image != null) {
    gc.drawImage(image,x,bounds.y + (bounds.height - image.getBounds().height) / 2);
    x+=image.getBounds().width + IMAGE_SPACING;
  }
  int width=bounds.width - x;
  width-=RIGHT_MARGIN;
  Color foreground=getHeaderForeground();
  if (foreground == null) {
    foreground=DEFAULT_FOREGROUND_TEXT;
  }
  gc.setForeground(foreground);
  int y=bounds.y;
  int selectionOffset=0;
  y+=(bounds.height - gc.stringExtent(text).y) / 2;
  gc.drawString(org.jkiss.dbeaver.ui.TextUtils.getShortString(grid.fontMetrics,text,width),bounds.x + x + selectionOffset,y + selectionOffset,true);
}
