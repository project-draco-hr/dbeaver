{
  if (attachedJob != null) {
    attachedJob.canceling();
    return;
  }
  if (!blockCanceled) {
    Job cancelJob=new Job("Cancel block"){
      @Override protected IStatus run(      IProgressMonitor monitor){
        if (!finished && !blockCanceled) {
          DBRBlockingObject block=progressMonitor.getActiveBlock();
          if (block != null) {
            try {
              block.cancelBlock();
            }
 catch (            DBException e) {
              return RuntimeUtils.makeExceptionStatus("Can't interrupt operation " + block,e);
            }
catch (            Throwable e) {
              log.debug("Cancel error",e);
              return Status.CANCEL_STATUS;
            }
            blockCanceled=true;
          }
        }
        return Status.OK_STATUS;
      }
    }
;
    try {
      cancelJob.schedule(cancelTimeout);
    }
 catch (    Exception e) {
      log.debug(e);
    }
  }
}
