{
  result=true;
  DBeaverCore core=DBeaverCore.getInstance();
  for (  IProject project : core.getLiveProjects()) {
    if (project.isOpen()) {
      DataSourceRegistry registry=core.getProjectRegistry().getDataSourceRegistry(project);
      if (registry != null) {
        for (        DataSourceDescriptor dataSourceDescriptor : registry.getDataSources()) {
          if (!DataSourceDescriptor.checkAndCloseActiveTransaction(monitor,dataSourceDescriptor)) {
            result=false;
            return;
          }
        }
      }
    }
  }
}
