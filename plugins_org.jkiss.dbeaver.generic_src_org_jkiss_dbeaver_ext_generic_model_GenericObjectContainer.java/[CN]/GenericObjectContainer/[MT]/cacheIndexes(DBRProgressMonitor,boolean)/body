{
synchronized (indexCache) {
    if (!indexCache.isCached()) {
      try {
        indexCache.getObjects(monitor,this,null);
      }
 catch (      Exception e) {
        if (readFromTables) {
          Collection<GenericTable> tables=getTables(monitor);
          monitor.beginTask("Cache indexes from tables",tables.size());
          try {
            List<GenericTableIndex> tmpIndexMap=new ArrayList<GenericTableIndex>();
            for (            GenericTable table : tables) {
              if (monitor.isCanceled()) {
                return;
              }
              monitor.subTask("Read indexes for '" + table.getFullQualifiedName() + "'");
              tmpIndexMap.addAll(table.getIndexes(monitor));
              monitor.worked(1);
            }
            indexCache.setCache(tmpIndexMap);
          }
  finally {
            monitor.done();
          }
        }
      }
    }
  }
}
