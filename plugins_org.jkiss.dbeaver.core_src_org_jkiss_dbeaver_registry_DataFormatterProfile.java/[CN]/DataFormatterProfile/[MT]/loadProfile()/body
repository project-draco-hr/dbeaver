{
{
    String language=store.getString(PROP_LANGUAGE);
    String country=store.getString(PROP_COUNTRY);
    String variant=store.getString(PROP_VARIANT);
    if (CommonUtils.isEmpty(language)) {
      this.locale=Locale.getDefault();
    }
 else     if (CommonUtils.isEmpty(country)) {
      this.locale=new Locale(language);
    }
 else     if (CommonUtils.isEmpty(variant)) {
      this.locale=new Locale(language,country);
    }
 else {
      this.locale=new Locale(language,country,variant);
    }
  }
  properties.clear();
  for (  DataFormatterDescriptor formatter : DBeaverCore.getInstance().getDataFormatterRegistry().getDataFormatters()) {
    Map<Object,Object> formatterProps=new HashMap<Object,Object>();
    for (    PropertyDescriptorEx prop : formatter.getProperties()) {
      Object propValue=RuntimeUtils.getPreferenceValue(store,DATAFORMAT_TYPE_PREFIX + formatter.getId() + "."+ prop.getId(),prop.getDataType());
      if (propValue != null) {
        formatterProps.put(prop.getId(),propValue);
      }
    }
    properties.put(formatter.getId(),formatterProps);
  }
}
