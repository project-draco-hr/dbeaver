{
  if (monitorPart != null) {
    monitorPart.setVisible(true);
    monitorPart.layout();
    monitorPart.attachToCancelComponent(null);
  }
  try {
    ModalContext.run(new IRunnableWithProgress(){
      @Override public void run(      IProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
        runnable.run(new DefaultProgressMonitor(monitor));
      }
    }
,true,monitorPart,getShell().getDisplay());
  }
  finally {
    if (monitorPart != null) {
      monitorPart.done();
      monitorPart.setVisible(false);
    }
  }
}
