{
  if (mapping instanceof DatabaseMappingContainer) {
    final DatabaseConsumerSettings settings=getWizard().getPageSettings(this,DatabaseConsumerSettings.class);
    if (settings.getContainerNode() != null && settings.getContainerNode().getObject() instanceof DBSObjectContainer) {
      DBSObjectContainer container=(DBSObjectContainer)settings.getContainerNode().getObject();
      for (      DBSObject child : container.getChildren(VoidProgressMonitor.INSTANCE)) {
        if (child instanceof DBSDataManipulator && name.equals(child.getName())) {
          mapping.setMappingType(DatabaseMappingType.existing);
          ((DatabaseMappingContainer)mapping).setTarget((DBSDataManipulator)child);
          return;
        }
      }
    }
    mapping.setMappingType(DatabaseMappingType.create);
    ((DatabaseMappingContainer)mapping).setTargetName(name);
  }
 else {
    DatabaseMappingAttribute attrMapping=(DatabaseMappingAttribute)mapping;
    if (attrMapping.getParent().getTarget() instanceof DBSEntity) {
      DBSEntity parentEntity=(DBSEntity)attrMapping.getParent().getTarget();
      for (      DBSEntityAttribute attr : parentEntity.getAttributes(VoidProgressMonitor.INSTANCE)) {
        if (name.equals(attr.getName())) {
          attrMapping.setMappingType(DatabaseMappingType.existing);
          attrMapping.setTarget(attr);
          return;
        }
      }
    }
    attrMapping.setMappingType(DatabaseMappingType.create);
    attrMapping.setTargetName(name);
  }
}
