{
  Object value=controller.getValue();
  IValueController.EditType binaryEditType=IValueController.EditType.valueOf(controller.getExecutionContext().getDataSource().getContainer().getPreferenceStore().getString(DBeaverPreferences.RESULT_SET_BINARY_EDITOR_TYPE));
  if (binaryEditType != IValueController.EditType.EDITOR && value instanceof DBDContentCached) {
    return new TextViewDialog(controller);
  }
 else   if (value instanceof DBDContent) {
    DBDContent content=(DBDContent)value;
    boolean isText=ContentUtils.isTextContent(content);
    List<ContentEditorPart> parts=new ArrayList<ContentEditorPart>();
    if (isText) {
      parts.add(new ContentTextEditorPart());
      if (ContentUtils.isXML(content)) {
        parts.add(new ContentXMLEditorPart());
      }
    }
 else {
      parts.add(new ContentBinaryEditorPart());
      parts.add(new ContentTextEditorPart());
      parts.add(new ContentImageEditorPart());
    }
    return ContentEditor.openEditor(controller,parts.toArray(new ContentEditorPart[parts.size()]));
  }
 else {
    controller.showMessage(CoreMessages.model_jdbc_unsupported_content_value_type_,true);
    return null;
  }
}
