{
  OBJECT_TYPE constraint=command.getObject();
  String constraintName=DBUtils.getQuotedIdentifier(constraint.getDataSource(),constraint.getName());
  boolean legacySyntax=isLegacyConstraintsSyntax(owner);
  StringBuilder decl=new StringBuilder(40);
  if (!legacySyntax || !constraint.isPersisted()) {
    decl.append("CONSTRAINT ");
  }
  if (!legacySyntax) {
    decl.append(constraintName).append(" ");
  }
  decl.append(getAddConstraintTypeClause(constraint)).append(" (");
  try {
    List<? extends DBSEntityAttributeRef> attrs=command.getObject().getAttributeReferences(VoidProgressMonitor.INSTANCE);
    if (attrs != null) {
      boolean firstColumn=true;
      for (      DBSEntityAttributeRef constraintColumn : attrs) {
        final DBSEntityAttribute attribute=constraintColumn.getAttribute();
        if (attribute == null) {
          continue;
        }
        if (!firstColumn)         decl.append(",");
        firstColumn=false;
        decl.append(DBUtils.getQuotedIdentifier(attribute));
      }
    }
  }
 catch (  DBException e) {
    log.warn("Can't obtain attribute references",e);
  }
  decl.append(")");
  if (legacySyntax) {
    decl.append(" CONSTRAINT ").append(constraintName);
  }
  return decl;
}
