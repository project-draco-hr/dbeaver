{
  IPreferenceStore store=DBeaverCore.getInstance().getGlobalPreferenceStore();
  store.setValue(PrefConstants.UI_AUTO_UPDATE_CHECK,automaticUpdateCheck.getSelection());
  store.setValue(PrefConstants.UI_PROXY_HOST,proxyHostText.getText());
  store.setValue(PrefConstants.UI_PROXY_PORT,proxyPortSpinner.getSelection());
  store.setValue(PrefConstants.UI_PROXY_USER,proxyUserText.getText());
  String password=proxyPasswordText.getText();
  if (!CommonUtils.isEmpty(password) && encrypter != null) {
    try {
      password=encrypter.encrypt(password);
    }
 catch (    EncryptionException e) {
      log.warn(e);
    }
  }
  store.setValue(PrefConstants.UI_PROXY_PASSWORD,password);
  store.setValue(PrefConstants.UI_DRIVERS_HOME,customDriversHome.getText());
  RuntimeUtils.savePreferenceStore(store);
  return super.performOk();
}
