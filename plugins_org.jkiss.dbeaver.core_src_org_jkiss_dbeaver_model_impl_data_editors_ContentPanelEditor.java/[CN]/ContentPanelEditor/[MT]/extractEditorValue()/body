{
  final DBDContent content=(DBDContent)valueController.getValue();
  DBeaverUI.runInUI(DBeaverUI.getActiveWorkbenchWindow(),new DBRRunnableWithProgress(){
    @Override public void run(    DBRProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
      try {
        if (control instanceof Text) {
          Text styledText=(Text)control;
          content.updateContents(monitor,new StringContentStorage(styledText.getText()));
        }
 else         if (control instanceof HexEditControl) {
          HexEditControl hexEditControl=(HexEditControl)control;
          BinaryContent binaryContent=hexEditControl.getContent();
          ByteBuffer buffer=ByteBuffer.allocate((int)binaryContent.length());
          try {
            binaryContent.get(buffer,0);
          }
 catch (          IOException e) {
            log.error(e);
          }
          content.updateContents(monitor,new BytesContentStorage(buffer.array(),ContentUtils.getDefaultFileEncoding()));
        }
      }
 catch (      Exception e) {
        throw new InvocationTargetException(e);
      }
    }
  }
);
  return content;
}
