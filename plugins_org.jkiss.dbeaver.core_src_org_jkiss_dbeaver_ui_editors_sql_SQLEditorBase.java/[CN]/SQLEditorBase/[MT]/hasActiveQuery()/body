{
  ISelectionProvider selectionProvider=getSelectionProvider();
  if (!(selectionProvider instanceof ITextSelection)) {
    return false;
  }
  ITextSelection selection=(ITextSelection)selectionProvider.getSelection();
  String selText=selection.getText();
  if (CommonUtils.isEmpty(selText)) {
    Document document=getDocument();
    try {
      IRegion lineRegion=document.getLineInformationOfOffset(selection.getOffset());
      selText=document.get(lineRegion.getOffset(),lineRegion.getLength());
    }
 catch (    BadLocationException e) {
      log.warn(e);
      return false;
    }
  }
  return !CommonUtils.isEmpty(selText.trim());
}
