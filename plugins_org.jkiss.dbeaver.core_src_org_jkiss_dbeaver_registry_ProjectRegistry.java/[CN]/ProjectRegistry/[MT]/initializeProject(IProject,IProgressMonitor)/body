{
  if (!project.isOpen()) {
    project.open(monitor);
  }
  String projectId=project.getPersistentProperty(DBPResourceHandler.PROP_PROJECT_ID);
  if (projectId == null) {
    project.setPersistentProperty(DBPResourceHandler.PROP_PROJECT_ID,projectId=SecurityUtils.generateGUID(false));
  }
  if (projectId.equals(activeProjectId)) {
    activeProject=project;
  }
  for (  DBPResourceHandler handler : resourceHandlerList) {
    try {
      handler.initializeProject(project,monitor);
    }
 catch (    DBException e) {
      log.warn("Can't initialize project using resource handler",e);
    }
  }
  DataSourceRegistry dataSourceRegistry=new DataSourceRegistry(project);
  projectDatabases.put(projectId,dataSourceRegistry);
  return project;
}
