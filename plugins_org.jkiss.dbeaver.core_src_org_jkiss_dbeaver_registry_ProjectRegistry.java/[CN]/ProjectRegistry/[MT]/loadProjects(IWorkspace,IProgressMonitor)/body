{
  final DBeaverCore core=DBeaverCore.getInstance();
  String activeProjectName=core.getGlobalPreferenceStore().getString("project.active");
  List<IProject> projects=core.getLiveProjects();
  if (DBeaverCore.isStandalone() && CommonUtils.isEmpty(projects)) {
    monitor.beginTask("Create general project",1);
    try {
      createGeneralProject(workspace,monitor);
    }
  finally {
      monitor.done();
    }
    projects=core.getLiveProjects();
  }
  monitor.beginTask("Open active project",projects.size());
  try {
    List<IProject> availableProjects=new ArrayList<IProject>();
    for (    IProject project : projects) {
      if (project.exists() && !project.isHidden()) {
        if (project.getName().equals(activeProjectName)) {
          activeProject=project;
          break;
        }
        availableProjects.add(project);
      }
      monitor.worked(1);
    }
    if (activeProject == null && !availableProjects.isEmpty()) {
      setActiveProject(availableProjects.get(0));
    }
    if (activeProject != null) {
      activeProject.open(monitor);
    }
  }
  finally {
    monitor.done();
  }
  this.workspace=workspace;
  workspace.addResourceChangeListener(this);
}
