{
  DBDPseudoAttribute pseudoAttribute=null;
  if (attribute.isPseudoAttribute()) {
    if (attribute instanceof DBDAttributeBinding) {
      pseudoAttribute=((DBDAttributeBinding)attribute).getMetaAttribute().getPseudoAttribute();
    }
 else     if (attribute instanceof DBCAttributeMetaData) {
      pseudoAttribute=((DBCAttributeMetaData)attribute).getPseudoAttribute();
    }
 else {
      log.error("Unsupported attribute argument: " + attribute);
    }
  }
  if (pseudoAttribute != null) {
    String criteria=pseudoAttribute.getQueryExpression().replace("$alias",tableAlias != null ? tableAlias : getName());
    query.append(criteria);
  }
 else {
    if (tableAlias != null) {
      query.append(tableAlias).append(dialect.getStructSeparator());
    }
    query.append(getAttributeName(attribute));
  }
  query.append("=?");
}
