{
  String text=getHeaderText();
  gc.setFont(getDisplay().getSystemFont());
  Color background=getHeaderBackground();
  if (background == null) {
    background=getDisplay().getSystemColor(SWT.COLOR_WIDGET_BACKGROUND);
  }
  gc.setBackground(background);
  if (isSelected()) {
    gc.setBackground(grid.getCellHeaderSelectionBackground());
  }
  gc.fillRectangle(getBounds().x,getBounds().y,getBounds().width,getBounds().height + 1);
{
    gc.setForeground(getDisplay().getSystemColor(SWT.COLOR_WIDGET_NORMAL_SHADOW));
    gc.drawLine(getBounds().x + getBounds().width - 1,getBounds().y,getBounds().x + getBounds().width - 1,getBounds().y + getBounds().height - 1);
    gc.drawLine(getBounds().x,getBounds().y + getBounds().height - 1,getBounds().x + getBounds().width - 1,getBounds().y + getBounds().height - 1);
  }
  int x=leftMargin;
  Image image=getHeaderImage();
  if (image != null) {
    gc.drawImage(image,x,getBounds().y + (getBounds().height - image.getBounds().height) / 2);
    x+=image.getBounds().width + 5;
  }
  int width=getBounds().width - x;
  width-=rightMargin;
  Color foreground=getHeaderForeground();
  if (foreground == null) {
    foreground=getDisplay().getSystemColor(SWT.COLOR_WIDGET_FOREGROUND);
  }
  gc.setForeground(foreground);
  int y=getBounds().y;
  int selectionOffset=0;
  y+=(getBounds().height - gc.stringExtent(text).y) / 2;
  gc.drawString(org.jkiss.dbeaver.ui.TextUtils.getShortString(gc,text,width),getBounds().x + x + selectionOffset,y + selectionOffset,true);
}
