{
  IResource resource=(IResource)getElement().getAdapter(IResource.class);
  if (resource == null) {
    return true;
  }
  try {
    if (encodingEditor != null && !encodingEditor.getText().equals(defEncoding)) {
      String newEncoding=encodingEditor.getText();
      applyEncoding(resource,newEncoding,new NullProgressMonitor());
      defEncoding=newEncoding;
    }
  }
 catch (  CoreException exception) {
    ErrorDialog.openError(getShell(),"Error",exception.getLocalizedMessage(),exception.getStatus());
    return false;
  }
  return true;
}
