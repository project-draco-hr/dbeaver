{
  dataPipes=new ArrayList<DataTransferPipe>();
  if (!CommonUtils.isEmpty(producers)) {
    for (    IDataTransferProducer producer : producers) {
      dataPipes.add(new DataTransferPipe(producer,null));
    }
  }
 else   if (!CommonUtils.isEmpty(consumers)) {
    for (    IDataTransferConsumer consumer : consumers) {
      dataPipes.add(new DataTransferPipe(null,consumer));
    }
  }
 else   if (producers.size() == consumers.size()) {
    for (int i=0; i < producers.size(); i++) {
      dataPipes.add(new DataTransferPipe(producers.get(i),consumers.get(i)));
    }
  }
 else {
    throw new IllegalArgumentException("Producers must match consumers or must be empty");
  }
}
