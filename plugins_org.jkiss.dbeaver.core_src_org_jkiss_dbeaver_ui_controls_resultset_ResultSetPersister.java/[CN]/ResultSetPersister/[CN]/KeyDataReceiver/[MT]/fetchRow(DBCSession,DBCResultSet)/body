{
  DBCResultSetMetaData rsMeta=resultSet.getMeta();
  List<DBCAttributeMetaData> keyAttributes=rsMeta.getAttributes();
  for (int i=0; i < keyAttributes.size(); i++) {
    DBCAttributeMetaData keyAttribute=keyAttributes.get(i);
    DBDValueHandler valueHandler=DBUtils.findValueHandler(session,keyAttribute);
    Object keyValue=valueHandler.fetchValueObject(session,resultSet,keyAttribute,i);
    if (keyValue == null) {
      continue;
    }
    boolean updated=false;
    if (!CommonUtils.isEmpty(keyAttribute.getName())) {
      DBDAttributeBinding binding=model.getAttributeBinding(statement.entity,keyAttribute.getName());
      if (binding != null) {
        statement.updatedCells.put(binding.getOrdinalPosition(),keyValue);
        updated=true;
      }
    }
    if (!updated) {
      for (int k=0; k < columns.length; k++) {
        DBDAttributeBinding column=columns[k];
        if (column.isAutoGenerated()) {
          statement.updatedCells.put(k,keyValue);
          updated=true;
          break;
        }
      }
    }
    if (!updated) {
      log.debug("Can't find target column for auto-generated key '" + keyAttribute.getName() + "'");
    }
  }
}
