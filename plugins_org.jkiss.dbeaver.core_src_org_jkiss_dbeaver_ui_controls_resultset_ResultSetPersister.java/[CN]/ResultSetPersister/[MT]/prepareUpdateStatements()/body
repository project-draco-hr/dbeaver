{
  for (  RowData row : this.rowIdentifiers.keySet()) {
    if (row.changes == null)     continue;
    DBDRowIdentifier rowIdentifier=this.rowIdentifiers.get(row);
    DBSEntity table=rowIdentifier.getEntity();
{
      DataStatementInfo statement=new DataStatementInfo(DBSManipulationType.UPDATE,row,table);
      for (      DBDAttributeBinding changedAttr : row.changes.keySet()) {
        statement.updateAttributes.add(new DBDAttributeValue(changedAttr,model.getCellValue(row,changedAttr)));
      }
      Collection<? extends DBCAttributeMetaData> idColumns=rowIdentifier.getEntityIdentifier().getResultSetColumns();
      for (      DBCAttributeMetaData idAttribute : idColumns) {
        DBDAttributeBinding metaColumn=model.getAttributeBinding(idAttribute);
        if (metaColumn == null) {
          throw new DBCException("Can't find meta column for ID column " + idAttribute.getName());
        }
        int attributeIndex=metaColumn.getAttributeIndex();
        Object keyValue=row.values[attributeIndex];
        if (row.changes != null && row.changes.containsKey(metaColumn)) {
          keyValue=row.changes.containsKey(metaColumn);
        }
        statement.keyAttributes.add(new DBDAttributeValue(metaColumn,keyValue));
      }
      updateStatements.add(statement);
    }
  }
}
