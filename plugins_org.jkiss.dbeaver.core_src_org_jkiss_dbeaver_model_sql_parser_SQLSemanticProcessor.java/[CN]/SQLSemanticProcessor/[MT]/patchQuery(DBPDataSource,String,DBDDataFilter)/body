{
  try {
    Statement statement=CCJSqlParserUtil.parse(sql);
    if (statement instanceof Select && ((Select)statement).getSelectBody() instanceof PlainSelect) {
      patchSelectQuery(dataSource,(PlainSelect)((Select)statement).getSelectBody(),filter);
    }
    return statement.toString();
  }
 catch (  Exception e) {
    throw new DBException("SQL parse error",e);
  }
}
