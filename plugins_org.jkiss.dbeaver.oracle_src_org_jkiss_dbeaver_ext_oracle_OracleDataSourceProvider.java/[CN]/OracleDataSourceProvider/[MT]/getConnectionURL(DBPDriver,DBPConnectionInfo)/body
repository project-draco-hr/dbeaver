{
  boolean isOCI=OCIUtils.isOciDriver(driver);
  OracleConstants.ConnectionType connectionType;
  Object conTypeProperty=connectionInfo.getProperties().get(OracleConstants.PROP_CONNECTION_TYPE);
  if (conTypeProperty != null) {
    connectionType=OracleConstants.ConnectionType.valueOf(CommonUtils.toString(conTypeProperty));
  }
 else {
    connectionType=OracleConstants.ConnectionType.BASIC;
  }
  StringBuilder url=new StringBuilder(100);
  url.append("jdbc:oracle:");
  if (isOCI) {
    url.append("oci");
  }
 else {
    url.append("thin");
  }
  url.append(":@");
  if ((connectionType == OracleConstants.ConnectionType.TNS || CommonUtils.isEmpty(connectionInfo.getHostName())) && !CommonUtils.isEmpty(connectionInfo.getDatabaseName())) {
    url.append(connectionInfo.getDatabaseName());
  }
 else {
    boolean isSID=OracleConnectionType.SID.name().equals(connectionInfo.getProperties().get(OracleConstants.PROP_SID_SERVICE));
    if (!isOCI && !isSID) {
      url.append("//");
    }
    if (!CommonUtils.isEmpty(connectionInfo.getHostName())) {
      url.append(connectionInfo.getHostName());
    }
    if (!CommonUtils.isEmpty(connectionInfo.getHostPort())) {
      url.append(":");
      url.append(connectionInfo.getHostPort());
    }
    if (isOCI || isSID) {
      url.append(":");
    }
 else {
      url.append("/");
    }
    if (!CommonUtils.isEmpty(connectionInfo.getDatabaseName())) {
      url.append(connectionInfo.getDatabaseName());
    }
  }
  return url.toString();
}
