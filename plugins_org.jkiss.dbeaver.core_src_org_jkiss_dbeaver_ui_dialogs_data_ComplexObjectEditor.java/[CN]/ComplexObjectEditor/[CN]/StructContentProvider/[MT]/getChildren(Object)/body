{
  if (parent instanceof DBDComposite) {
    DBDComposite structure=(DBDComposite)parent;
    try {
      DBSAttributeBase[] attributes=structure.getAttributes();
      Object[] children=new Object[attributes.length];
      for (int i=0; i < attributes.length; i++) {
        DBSAttributeBase attr=attributes[i];
        Object value=structure.getAttributeValue(attr);
        children[i]=new FieldInfo(structure.getDataType().getDataSource(),attr,value);
      }
      return children;
    }
 catch (    DBException e) {
      log.error("Error getting structure meta data",e);
    }
  }
 else   if (parent instanceof DBDCollection) {
    DBDCollection array=(DBDCollection)parent;
    ArrayItem[] items=new ArrayItem[array.getItemCount()];
    for (int i=0; i < items.length; i++) {
      items[i]=new ArrayItem(array,i,array.getItem(i));
    }
    return items;
  }
 else   if (parent instanceof DBDReference) {
    final DBDReference reference=(DBDReference)parent;
    DBRRunnableWithResult<Object> runnable=new DBRRunnableWithResult<Object>(){
      @Override public void run(      DBRProgressMonitor monitor) throws InvocationTargetException, InterruptedException {
        try (DBCSession session=executionContext.openSession(monitor,DBCExecutionPurpose.UTIL,"Read reference value")){
          result=reference.getReferencedObject(session);
        }
 catch (        DBCException e) {
          throw new InvocationTargetException(e);
        }
      }
    }
;
    DBeaverUI.runInUI(DBeaverUI.getActiveWorkbenchWindow(),runnable);
    return getChildren(runnable.getResult());
  }
 else   if (parent instanceof FieldInfo) {
    Object value=((FieldInfo)parent).value;
    if (isComplexType(value)) {
      return getChildren(value);
    }
  }
 else   if (parent instanceof ArrayItem) {
    Object value=((ArrayItem)parent).value;
    if (isComplexType(value)) {
      return getChildren(value);
    }
  }
  return new Object[0];
}
